{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{useMsal}from'@azure/msal-react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const{instance,accounts,inProgress}=useMsal();const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{if(accounts.length>0){setUser(accounts[0]);}setLoading(false);},[accounts]);const login=async()=>{try{const loginRequest={scopes:['openid','profile','email']};await instance.loginPopup(loginRequest);}catch(error){console.error('Login failed:',error);}};const logout=async()=>{try{const logoutRequest={account:user};await instance.logoutPopup(logoutRequest);setUser(null);}catch(error){console.error('Logout failed:',error);}};const signUp=async()=>{try{const signUpRequest={scopes:['openid','profile','email'],authority:process.env.REACT_APP_B2C_SIGNUP_AUTHORITY};await instance.loginPopup(signUpRequest);}catch(error){console.error('Sign up failed:',error);}};const value={user,login,logout,signUp,loading,isAuthenticated:!!user};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useMsal","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","instance","accounts","inProgress","user","setUser","loading","setLoading","length","login","loginRequest","scopes","loginPopup","error","console","logout","logoutRequest","account","logoutPopup","signUp","signUpRequest","authority","process","env","REACT_APP_B2C_SIGNUP_AUTHORITY","value","isAuthenticated","Provider"],"sources":["/Users/mohaimenkhan/repos/research-comm/ui/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useMsal } from '@azure/msal-react';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const { instance, accounts, inProgress } = useMsal();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (accounts.length > 0) {\n      setUser(accounts[0]);\n    }\n    setLoading(false);\n  }, [accounts]);\n\n  const login = async () => {\n    try {\n      const loginRequest = {\n        scopes: ['openid', 'profile', 'email'],\n      };\n\n      await instance.loginPopup(loginRequest);\n    } catch (error) {\n      console.error('Login failed:', error);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      const logoutRequest = {\n        account: user\n      };\n\n      await instance.logoutPopup(logoutRequest);\n      setUser(null);\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const signUp = async () => {\n    try {\n      const signUpRequest = {\n        scopes: ['openid', 'profile', 'email'],\n        authority: process.env.REACT_APP_B2C_SIGNUP_AUTHORITY\n      };\n\n      await instance.loginPopup(signUpRequest);\n    } catch (error) {\n      console.error('Sign up failed:', error);\n    }\n  };\n\n  const value = {\n    user,\n    login,\n    logout,\n    signUp,\n    loading,\n    isAuthenticated: !!user\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,OAAO,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAQ,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,6CAA6C,CAAC,CAChE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAEE,QAAQ,CAAEC,QAAQ,CAAEC,UAAW,CAAC,CAAGZ,OAAO,CAAC,CAAC,CACpD,KAAM,CAACa,IAAI,CAAEC,OAAO,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,GAAIY,QAAQ,CAACM,MAAM,CAAG,CAAC,CAAE,CACvBH,OAAO,CAACH,QAAQ,CAAC,CAAC,CAAC,CAAC,CACtB,CACAK,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,CAACL,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAO,KAAK,CAAG,KAAAA,CAAA,GAAY,CACxB,GAAI,CACF,KAAM,CAAAC,YAAY,CAAG,CACnBC,MAAM,CAAE,CAAC,QAAQ,CAAE,SAAS,CAAE,OAAO,CACvC,CAAC,CAED,KAAM,CAAAV,QAAQ,CAACW,UAAU,CAACF,YAAY,CAAC,CACzC,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAE,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,CACpBC,OAAO,CAAEb,IACX,CAAC,CAED,KAAM,CAAAH,QAAQ,CAACiB,WAAW,CAACF,aAAa,CAAC,CACzCX,OAAO,CAAC,IAAI,CAAC,CACf,CAAE,MAAOQ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CAAC,CAED,KAAM,CAAAM,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,CACpBT,MAAM,CAAE,CAAC,QAAQ,CAAE,SAAS,CAAE,OAAO,CAAC,CACtCU,SAAS,CAAEC,OAAO,CAACC,GAAG,CAACC,8BACzB,CAAC,CAED,KAAM,CAAAvB,QAAQ,CAACW,UAAU,CAACQ,aAAa,CAAC,CAC1C,CAAE,MAAOP,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACzC,CACF,CAAC,CAED,KAAM,CAAAY,KAAK,CAAG,CACZrB,IAAI,CACJK,KAAK,CACLM,MAAM,CACNI,MAAM,CACNb,OAAO,CACPoB,eAAe,CAAE,CAAC,CAACtB,IACrB,CAAC,CAED,mBACEX,IAAA,CAACC,WAAW,CAACiC,QAAQ,EAACF,KAAK,CAAEA,KAAM,CAAAzB,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}